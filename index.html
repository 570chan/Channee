<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>neChannee!</title>

    <!-- Open Graph / Twitter -->
    <meta property="og:title" content="neChannene!" />
    <meta property="og:description" content="where i sleep at nightüåô" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://channee.vercel.app" />
    <meta property="og:image" content="https://s3.tebi.io/ely.bucket.s0.io.biti/downloaded-file.png.jpg" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="neChannee!" />
    <meta name="twitter:description" content="Join our cozy Discord ‚Äî where I take a nap and vibe with friends üåô" />
    <meta name="twitter:image" content="https://s3.tebi.io/ely.bucket.s0.io.biti/downloaded-file.png.jpg" />

    <link rel="icon" href="/favicon-32x32.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Knewave&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      :root { --bg: #f8fafc; --fg: #1e293b; --glass: rgba(255,255,255,0.25); }
      html,body{height:100%}
      body{
        margin:0; font-family: "Inter",system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue";
        background:var(--bg); color:var(--fg); overflow-x:hidden;
      }
      .knewave { font-family: "Knewave", system-ui, cursive; }

      .glass-card{
        background:transparent; border:2px solid #fff; border-radius:16px;
        box-shadow:0 0 32px rgba(255,255,255,0.25); transition:transform .3s,box-shadow .3s;
      }
      .profile-pic{ transition:transform .3s; box-shadow:0 2px 18px rgba(0,0,0,.13); }
      .profile-pic:hover{ transform:scale(1.05); }
      .link-card{ background:var(--glass); transition:transform .3s,box-shadow .3s; }
      .link-card:hover{ transform:translateY(-4px) scale(1.02); box-shadow:0 10px 25px -5px rgba(0,0,0,.14); }

      .fade-in{ opacity:0; animation:fadeIn 1s cubic-bezier(.42,0,.58,1) forwards; }
      @keyframes fadeIn{
        from{opacity:0; transform:translateY(28px)}
        to{opacity:1; transform:none}
      }

      .bg-video{
        position:fixed; inset:0; width:100vw; height:100vh; object-fit:cover; z-index:-1; pointer-events:none;
      }

      /* Fullscreen button */
      #reading-list-box{
        position:fixed; left:12px; bottom:12px; width:48px; height:48px; border-radius:8px; z-index:9999;
        background:rgba(255,255,255,.9); box-shadow:0 2px 4px rgba(0,0,0,.18); border:1px solid #ccc;
        display:flex; align-items:center; justify-content:center; cursor:pointer; transition:background .2s;
      }
      #reading-list-box:hover{ background:rgba(200,255,200,.85); }

      /* Timer */
      .timer-hidden{ display:none!important; }
      #timer-container{ width:100%; box-sizing:border-box; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:2rem 1rem; }
      #timer-display{ font-variant-numeric:tabular-nums; letter-spacing:1px; text-align:center; color:#F0FFF0; font-size:3rem; }
      .timer-controls{ display:flex; gap:12px; margin-top:16px; }
      .timer-controls button{ padding:10px 14px; border-radius:10px; border:1px solid rgba(255,255,255,.6); background:rgba(255,255,255,.06); color:inherit; cursor:pointer; }

      .timer-transition{ transition:all .45s ease; will-change:opacity,transform,filter; }
      .timer-show{ opacity:1; transform:scale(1); filter:blur(0); }
      .timer-hide{ opacity:0; transform:scale(.96); filter:blur(0); } /* no blur per request */

      .hint-arrow{ position:absolute; top:50%; transform:translateY(-50%); font-size:2.2rem; color:rgba(255,255,255,.85); opacity:0; pointer-events:none; transition:opacity .5s; z-index:50; text-shadow:0 0 12px rgba(255,255,255,.5); }
      .hint-arrow.show{ opacity:1; }
      #arrow-left{ left:12% }
      #arrow-right{ right:12% }
      @media(max-width:640px){ #arrow-left{left:4%} #arrow-right{right:4%} }

      .link-card[href*="#"]{
        background-image:url('https://s3.tebi.io/ely.bucket.s0.io.biti/anime-girl-and-cat-watching-rain-thumb-728x410.jpg');
        background-size:cover; background-position:center; color:#fff;
      }

      /* START overlay: covers whole screen. No blur or dimming per request. */
      #start-overlay{
        position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:9998;
        background: transparent; /* explicit: no dim/blur */
        cursor: pointer;
      }
      #start-overlay .cta{
        background: rgba(0,0,0,0.55); /* keep CTA readable over video */
        color:#fff; padding:18px 28px; border-radius:12px; font-size:1.15rem; font-weight:600;
        box-shadow:0 6px 20px rgba(0,0,0,.35);
      }
      /* hide main content initially */
      .initial-hidden{ display:none; }
    </style>
  </head>

  <body class="min-h-screen flex items-center justify-center px-4 py-8 relative">
    <!-- Background Video -->
    <video id="bg-video" class="bg-video" autoplay loop muted playsinline>
      <source src="https://s3.tebi.io/ely.bucket.s0.io.biti/TikTok%20-%20Make%20Your%20Day.mp4" type="video/mp4" />
    </video>

    <!-- START overlay that captures the first click/tap anywhere -->
    <div id="start-overlay" role="button" aria-label="Click to enter" tabindex="0">
      <div class="cta">Click here</div>
    </div>

    <!-- Main content hidden initially; will fade in after overlay click -->
    <div id="main-content" class="max-w-md w-full mx-auto fade-in initial-hidden" aria-hidden="true">
      <!-- Profile card -->
      <div class="glass-card p-8 mb-8 text-center">
        <div class="flex justify-center mb-6">
          <img src="https://s3.tebi.io/ely.bucket.s0.io.biti/282097915f9d08ecbe8b367d00ac7a22.jpg"
               alt="Profile" class="profile-pic w-24 h-24 rounded-full object-cover" />
        </div>

        <h1 class="text-2xl font-bold text-black mb-1 knewave">Channee</h1>
        <p class="text-gray-600 mb-6">I don't even remember who I am...</p>

        <!-- Clock -->
        <div class="clock-container mb-8">
          <div id="time" class="text-5xl font-light text-[#F0FFF0]"></div>
          <div id="date" class="text-sm text-gray-100 mt-2"></div>
        </div>

        <!-- Social -->
        <div class="flex justify-center space-x-4 text-white">
          <a href="https://github.com/570chan" target="_blank" rel="noopener" aria-label="GitHub"><i class="fab fa-github fa-lg"></i></a>
          <a href="https://www.facebook.com/profile.php?id=61581606718917" target="_blank" rel="noopener" aria-label="Facebook"><i class="fab fa-facebook fa-lg"></i></a>
          <a href="https://linkedin.com/in/your-profile" target="_blank" rel="noopener" aria-label="LinkedIn"><i class="fab fa-linkedin fa-lg"></i></a>
        </div>

        <!-- Timer container (hidden by default) -->
        <div id="timer-container" class="timer-hidden mt-6">
          <p class="text-sm text-gray-200 mb-2 opacity-80">‚è≥ Countdown Timer ‚Äî 30 ph√∫t th∆∞ gi√£n</p>
          <div id="timer-display">30:00</div>
          <div class="timer-controls">
            <button id="start-pause-btn" title="Start / Pause" class="">
              <i class="fa fa-play"></i>
            </button>
            <button id="reset-btn" title="Reset">
              <i class="fa fa-rotate-right"></i>
            </button>
          </div>
        </div>

        <div id="arrow-left" class="hint-arrow">‚Üê</div>
        <div id="arrow-right" class="hint-arrow">‚Üí</div>
      </div>

      <!-- Discord / Link box -->
      <div class="space-y-4">
        <a href="#" class="block link-card glass-card p-2 rounded-lg">
          <div class="flex items-center">
            <div class="mr-4 flex items-center"></div>
            <div>
              <h3 class="font-medium text-gray-800">Unknown</h3>
              <p class="text-sm text-gray-500">where i take a nap</p>
            </div>
          </div>
          <ul class="mt-3 space-y-1 text-sm text-gray-700">
            <li>‚Ä¢ <b>air</b> _.570chan</li>
          </ul>
        </a>
      </div>
    </div>

    <!-- Fullscreen button -->
    <div id="reading-list-box" tabindex="0" class="glass-card" title="Toggle fullscreen" aria-label="Toggle fullscreen" style="outline:none">
      <button id="fs-btn" aria-label="Enter fullscreen" style="background:none;border:0;cursor:pointer;padding:6px">
        <svg id="fs-enter" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9V3h6M21 9V3h-6M3 15v6h6M21 15v6h-6"/></svg>
        <svg id="fs-exit" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none"><path d="M8 16H4v-4M16 8h4V4M8 8H4V4M16 16h4v-4"/></svg>
      </button>
    </div>

    <!-- Audio (no forced autoplay; play initiated on user gesture when overlay clicked) -->
    <audio id="bg-music" preload="auto" crossorigin="anonymous">
      <source src="https://s3.tebi.io/ely.bucket.s0.io.biti/Hoaprox%2C%20Dang%20Minh%20-%20PHAN%20DUYEN%20%28Destiny%29%20%20Future%20Bass%20%20NCS%20-%20Copyright%20Free%20Music%20-%20NoCopyrightSoun[...].mp3" type="audio/mpeg" />
    </audio>

    <script src="https://unpkg.com/feather-icons"></script>
    <script>
      (function () {
        // little helpers
        const $ = (s, ctx = document) => ctx.querySelector(s);
        const $$ = (s, ctx = document) => Array.from((ctx || document).querySelectorAll(s));

        // Clock
        function updateClock() {
          const now = new Date();
          const optionsTime = { timeZone: 'Asia/Ho_Chi_Minh', hour12: false, hour: '2-digit', minute: '2-digit' };
          const timeStr = now.toLocaleTimeString('en-US', optionsTime);
          const [hours, minutes] = timeStr.split(':');
          const optionsDate = { timeZone: 'Asia/Ho_Chi_Minh', weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
          const dateStr = now.toLocaleDateString('en-US', optionsDate);
          $('#time').textContent = `${hours}:${minutes}`;
          $('#date').textContent = dateStr;
        }
        updateClock();
        setInterval(updateClock, 1000);

        // Icons
        feather.replace();

        // Fullscreen
        (function () {
          const box = document.getElementById('reading-list-box');
          const enterIcon = document.getElementById('fs-enter');
          const exitIcon = document.getElementById('fs-exit');

          function showEnter(){ enterIcon.style.display = ''; exitIcon.style.display = 'none'; }
          function showExit(){ enterIcon.style.display = 'none'; exitIcon.style.display = ''; }

          async function toggle() {
            try {
              if (!document.fullscreenElement) {
                await document.documentElement.requestFullscreen();
                showExit();
              } else {
                await document.exitFullscreen();
                showEnter();
              }
            } catch (e) { /* ignore */ }
          }

          box.addEventListener('click', toggle);
          document.addEventListener('fullscreenchange', () => {
            if (document.fullscreenElement) showExit(); else showEnter();
          });
        })();

        /* Timer module (unchanged behavior, just uses icons from font-awesome now) */
        (function () {
          const card = document.querySelector('.glass-card img.profile-pic')?.closest('.glass-card') || document.querySelector('.glass-card');
          if (!card) return;

          const timerContainer = document.getElementById('timer-container');
          const timerDisplay = document.getElementById('timer-display');
          const startPauseBtn = document.getElementById('start-pause-btn');
          const resetBtn = document.getElementById('reset-btn');
          const children = Array.from(card.children).filter(c => c !== timerContainer);

          const INITIAL = 30 * 60;
          let remaining = INITIAL, intervalId = null, running = false, showing = false;

          const audio = document.getElementById('bg-music');
          if (audio) { audio.loop = true; audio.volume = 0.6; }

          function fmt(sec){
            const m = String(Math.floor(sec/60)).padStart(2,'0');
            const s = String(Math.floor(sec%60)).padStart(2,'0');
            return `${m}:${s}`;
          }
          function render(){ timerDisplay.textContent = fmt(remaining); }

          function ensureNotificationPermission(){
            if (!('Notification' in window)) return Promise.resolve('unsupported');
            if (Notification.permission === 'granted') return Promise.resolve('granted');
            if (Notification.permission === 'denied') return Promise.resolve('denied');
            return Notification.requestPermission();
          }
          function notifyEnd(){
            ensureNotificationPermission().then(p => {
              if (p === 'granted') {
                try { new Notification('‚è∞ H·∫øt gi·ªù r·ªìi!', { body: 'ƒê·∫øm ng∆∞·ª£c ƒë√£ k·∫øt th√∫c.', icon: 'https://cdn-icons-png.flaticon.com/512/992/992700.png' }); }
                catch(e){ alert('ƒê·∫øm ng∆∞·ª£c k·∫øt th√∫c!'); }
              } else {
                alert('ƒê·∫øm ng∆∞·ª£c k·∫øt th√∫c!');
              }
            });
          }

          function start(){
            if (running) return;
            running = true;
            startPauseBtn.innerHTML = '<i class="fa fa-pause"></i>';
            if (audio) { const p = audio.play(); if (p && p.catch) p.catch(()=>{}); }
            intervalId = setInterval(() => {
              if (remaining > 0) { remaining--; render(); }
              else {
                clearInterval(intervalId); intervalId = null; running = false;
                startPauseBtn.innerHTML = '<i class="fa fa-play"></i>';
                if (audio) { try { audio.pause(); audio.currentTime = 0; } catch(e){} }
                notifyEnd();
              }
            }, 1000);
          }

          function pause(){
            if (!running) return;
            running = false;
            clearInterval(intervalId); intervalId = null;
            startPauseBtn.innerHTML = '<i class="fa fa-play"></i>';
            if (audio) try { audio.pause(); } catch(e){}
          }

          function reset(){
            pause();
            remaining = INITIAL;
            render();
          }

          function showTimer(){
            if (showing) return;
            children.forEach(c => (c.style.display = 'none'));
            timerContainer.classList.remove('timer-hidden');
            timerContainer.classList.add('timer-transition','timer-hide');
            setTimeout(() => timerContainer.classList.replace('timer-hide','timer-show'), 10);
            showing = true; render();
          }

          function hideTimer(){
            if (!showing) return;
            timerContainer.classList.replace('timer-show','timer-hide');
            setTimeout(() => {
              timerContainer.classList.add('timer-hidden');
              children.forEach(c => (c.style.display = ''));
            }, 500);
            showing = false;
          }

          function toggleTimerView(){ showing ? hideTimer() : showTimer(); }

          startPauseBtn.addEventListener('click', e => { e.stopPropagation(); running ? pause() : start(); });
          resetBtn.addEventListener('click', e => { e.stopPropagation(); reset(); });

          let tsX = null, tsY = null;
          const TH = 40;
          function handleSwipe(dx, dy){ if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > TH) toggleTimerView(); }

          [card, timerContainer].forEach(el => {
            el.addEventListener('touchstart', e => { const t = e.touches[0]; tsX = t.clientX; tsY = t.clientY; }, { passive:true });
            el.addEventListener('touchend', e => {
              if (tsX === null) return;
              const t = e.changedTouches[0];
              handleSwipe(t.clientX - tsX, t.clientY - tsY);
              tsX = tsY = null;
            }, { passive:true });
          });

          let mDown = false, mStartX = 0;
          [card, timerContainer].forEach(el => {
            el.addEventListener('mousedown', e => { mDown = true; mStartX = e.clientX; });
          });
          window.addEventListener('mouseup', e => {
            if (!mDown) return; mDown = false;
            const dx = e.clientX - mStartX;
            if (Math.abs(dx) > TH) toggleTimerView();
          });

          card.addEventListener('dblclick', toggleTimerView);
          timerContainer.addEventListener('dblclick', toggleTimerView);

          window.addEventListener('beforeunload', () => { intervalId && clearInterval(intervalId); });

          render();
          window.__neChanneeTimer = { start, pause, reset, show: showTimer, hide: hideTimer };
        })();

        /* Hint arrows (show a few times) */
        (function () {
          const left = document.getElementById('arrow-left'), right = document.getElementById('arrow-right');
          if (!left || !right) return;
          let count = 0, max = 5;
          const id = setInterval(() => {
            if (count >= max) { left.remove(); right.remove(); clearInterval(id); return; }
            count++;
            left.classList.add('show'); right.classList.add('show');
            setTimeout(() => { left.classList.remove('show'); right.classList.remove('show'); }, 2000);
          }, 5000);
        })();

        /* Start overlay behavior:
           - cover entire viewport and capture the first click/tap/keyboard activation
           - on activation: remove overlay, reveal main content with fade-in, play audio
           - no overlay blur/dimming other than the CTA box itself
        */
        (function () {
          const overlay = document.getElementById('start-overlay');
          const main = document.getElementById('main-content');
          const audio = document.getElementById('bg-music');

          if (!overlay || !main) return;

          // handler to run once
          function activate(e) {
            // allow keyboard activation via Enter / Space
            if (e && e.type === 'keydown' && !['Enter',' ','Spacebar'].includes(e.key)) return;

            // prevent default navigation or other behavior
            e && e.preventDefault && e.preventDefault();

            // reveal main content
            main.classList.remove('initial-hidden');
            main.setAttribute('aria-hidden','false');

            // let fade-in animation happen: ensure element has fade-in class (it already does)
            // remove overlay from DOM to let clicks go through to page
            overlay.remove();

            // Try to play audio (user gesture satisfied by this click/key)
            if (audio) {
              const p = audio.play();
              if (p && typeof p.then === 'function') {
                p.catch(err => {
                  // autoplay may still fail in some contexts; ignore silently
                  console.warn('Audio play was blocked or failed:', err);
                });
              }
            }

            // re-render icons if needed
            try { feather.replace(); } catch (e) {}
            // remove listeners
            window.removeEventListener('click', activate);
            window.removeEventListener('keydown', activate);
            // stop propagation to avoid accidental double actions
            if (e && e.stopPropagation) e.stopPropagation();
          }

          // capture first click anywhere on the window
          window.addEventListener('click', activate, { once: true, capture: true });
          // also allow keyboard activation for accessibility
          window.addEventListener('keydown', activate, { once: true, capture: true });
          // make overlay focusable and focus it so keyboard events are caught immediately
          try { overlay.focus(); } catch (e) {}
        })();

        /* Request notification permission politely (non-blocking) */
        if ('Notification' in window && Notification.permission === 'default') {
          try { Notification.requestPermission().then(p => console.log('Notification permission:', p)); } catch(e){}
        }
      })();
    </script>
  </body>
</html>
