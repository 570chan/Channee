<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <!-- ƒë√¢y l√† t√≠nh nƒÉng, kh√¥ng ƒë∆∞·ª£c s·ª≠a viewport -->
    <meta name="viewport" content="width=1024, initial-scale=1">
    <title>Channee ‚Äî X</title>

    <!-- Open Graph / Twitter -->
    <meta property="og:title" content="Channee ‚Äî X." />
    <meta property="og:description" content="where i sleep at night üåô" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://nechan.vercel.app" />
    <meta property="og:image" content="https://s3.tebi.io/570chan.com.v2/IMG_20260106_214333.jpg" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Channee ‚Äî X." />
    <meta name="twitter:description" content="moew~" />
    <meta name="twitter:image" content="https://s3.tebi.io/570chan.com.v2/IMG_20260106_214333.jpg" />

    <link rel="icon" href="/favicon-32x32.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css2?family=Knewave&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="preload" as="video" href="https://s3.tebi.io/570chan.com.v2/kagura-nana-crying-virtual-youtuber-moewalls-com.mp4" type="video/mp4">
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      :root {
        --bg: #f8fafc;
        --fg: #1e293b;
        --glass: rgba(255,255,255,0.25);
        --accent-1: #8be9fd;
        --accent-2: #7c4dff;
      }
      html,body{height:100%}
      body{
        margin:0; font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue";
        background:var(--bg); color:var(--fg); overflow-x:hidden;
      }

      .knewave { font-family: "Knewave", system-ui, cursive; }

      /* Cards baseline */
      .glass-card{
        position: relative;
        background:transparent;
        border:2px solid rgba(255,255,255,0.65);
        border-radius:16px;
        box-shadow:
          0 18px 40px rgba(0,0,0,0.08),
          0 6px 18px rgba(255,255,255,0.06);
        transition:transform .3s,box-shadow .3s;
      }
      .profile-pic{ transition:transform .3s; box-shadow:0 2px 18px rgba(0,0,0,.13); }
      .profile-pic:hover{ transform:scale(1.05); }
      .link-card{
        display:block;
        background:var(--glass);
        color:var(--fg);
        padding:1rem;
        border-radius:12px;
        border:1px solid rgba(255,255,255,0.35);
        transition:transform .25s, box-shadow .25s, background .25s;
        text-decoration:none;
        overflow:hidden;
        position:relative;
      }
      .link-card:hover{
        transform: translateY(-4px) scale(1.01);
        box-shadow: 0 12px 30px rgba(0,0,0,0.12);
      }

      /* fade-in */
      .fade-in{ opacity:0; animation:fadeIn 1s cubic-bezier(.42,0,.58,1) forwards; }
      @keyframes fadeIn{ from{opacity:0; transform:translateY(28px)} to{opacity:1; transform:none} }

      .fade-in-card { opacity:0; animation-name: fadeIn; animation-timing-function: cubic-bezier(.42,0,.58,1); animation-fill-mode: forwards; }
      .glass-card.fade-in-card { animation-duration: 0.9s; animation-delay: 0.08s; }
      .link-card.fade-in-card { animation-duration: 1.2s; animation-delay: 0.28s; }

      .bg-video{
        position:fixed; inset:0; width:100vw; height:100vh; object-fit:cover; z-index:-2; pointer-events:none;
        transform:scale(1.02);
      }

      .watercolor-overlay{
        position:fixed; inset:0; z-index:-1; pointer-events:none;
        mix-blend-mode: overlay; opacity:0.45;
        background-image:
          radial-gradient(ellipse at 10% 20%, rgba(199,122,255,0.28) 0%, transparent 20%),
          radial-gradient(ellipse at 80% 80%, rgba(139,233,253,0.22) 0%, transparent 18%),
          linear-gradient(90deg, rgba(255,227,138,0.06), rgba(255,210,241,0.03));
        filter: blur(18px) saturate(1.05);
        animation: watercolorShift 18s ease-in-out infinite;
      }
      @keyframes watercolorShift{ 0%{ transform: translate3d(0,0,0) scale(1) } 50%{ transform: translate3d(-6%,4%,0) scale(1.02) } 100%{ transform: translate3d(0,0,0) scale(1) } }
      .watercolor-overlay::after{
        content:""; position:absolute; inset:0; background-image: url('data:image/svg+xml;utf8,\
          <svg xmlns="http://www.w3.org/2000/svg" width="600" height="400">\
            <filter id="n">\
              <feTurbulence baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/>\
              <feColorMatrix type="saturate" values="0"/>\
            </filter>\
            <rect width="100%" height="100%" filter="url(%23n)" opacity="0.06" fill="black"/>\
          </svg>'); mix-blend-mode: multiply; opacity:0.6; pointer-events:none;
        transform: scale(1.2);
      }

      /* Timer */
      .timer-hidden{ display:none!important; }
      #timer-container{ width:100%; box-sizing:border-box; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:2rem 1rem; }
      #timer-display{ font-variant-numeric:tabular-nums; letter-spacing:1px; text-align:center; color:#F0FFF0; font-size:3rem; }
      .timer-controls{ display:flex; gap:12px; margin-top:16px; }
      .timer-controls button{ padding:10px 14px; border-radius:10px; border:1px solid rgba(255,255,255,.6); background:rgba(255,255,255,.06); color:inherit; cursor:pointer; }

      .timer-transition{ transition:all .45s ease; will-change:opacity,transform,filter; }
      .timer-show{ opacity:1; transform:scale(1); filter:blur(0); }
      .timer-hide{ opacity:0; transform:scale(.96); filter:blur(0); }

      .hint-arrow{ position:absolute; top:50%; transform:translateY(-50%); font-size:2.2rem; color:rgba(255,255,255,.85); opacity:0; pointer-events:none; transition:opacity .5s; z-index:50; }
      .hint-arrow.show{ opacity:1; }
      #arrow-left{ left:12% }
      #arrow-right{ right:12% }
      @media(max-width:640px){ #arrow-left{left:4%} #arrow-right{right:4%} }

      .link-card[href*="#"]{
        background-image:url('https://s3.tebi.io/570chan.com.v2/0c90190a804cbf1f91c659131e58f325.jpg');
        background-size:cover; background-position:center; color:#fff; border:0;
      }
      .link-card[href*="#"]::after{
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(180deg, rgba(0,0,0,0.10), rgba(0,0,0,0.38));
        pointer-events: none;
        border-radius: 12px;
      }

      .brand-title {
        background: linear-gradient(90deg, #ffe38a 0%, #ffd1f0 30%, #bde6ff 60%, #c9b3ff 100%);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        font-size: 2.25rem;
        text-shadow: 0 10px 30px rgba(124,77,255,0.12), 0 2px 8px rgba(0,0,0,0.12);
      }
      .brand-animate { animation: floatText 2.4s ease-in-out infinite; transform-origin:center; }
      @keyframes floatText { 0%{ transform: translateY(0) } 50%{ transform: translateY(-3px) } 100%{ transform: translateY(0) } }

      /* small responsive tweaks */
      @media (max-width:420px){
        #timer-display{ font-size:2rem; }
        .brand-title{ font-size:1.75rem; }
      }
      .no-scrollbar::-webkit-scrollbar { width: 8px; height: 8px; }
      .no-scrollbar::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.1); border-radius: 8px; }
      .no-scrollbar { -ms-overflow-style: none; scrollbar-width: thin; }

      /* screen-reader only helper */
      .sr-only {
        position: absolute !important;
        width: 1px !important;
        height: 1px !important;
        padding: 0 !important;
        margin: -1px !important;
        overflow: hidden !important;
        clip: rect(0, 0, 0, 0) !important;
        white-space: nowrap !important;
        border: 0 !important;
      }
    </style>
  </head>

  <body class="min-h-screen flex items-center justify-center px-4 py-8 relative">
    <!-- Background Video -->
    <video id="bg-video" class="bg-video" autoplay loop muted playsinline preload="auto" fetchpriority="high" aria-hidden="true">
      <source src="https://s3.tebi.io/570chan.com.v2/kagura-nana-crying-virtual-youtuber-moewalls-com.mp4" type="video/mp4">
    </video>

    <!-- Watercolor overlay -->
    <div class="watercolor-overlay" aria-hidden="true"></div>

    <!-- Main content visible immediately (overlay removed) -->
    <div id="main-content" class="w-[700px] mx-auto fade-in">
      <!-- Profile card -->
      <div class="glass-card p-8 mb-8 text-center fade-in-card" role="region" aria-label="H·ªì s∆°">
        <div class="flex justify-center mb-6">
          <img src="https://s3.tebi.io/ely.bucket.s0.io.biti/IMG_20251213_143357.jpg"
               alt="Channee" class="profile-pic w-24 h-24 rounded-full object-cover" />
        </div>

        <h1 class="brand-title knewave font-bold mb-1 brand-animate">Channee</h1>
        <p class="text-black mb-6">I don't even remember who I am...</p>

        <!-- Clock -->
        <div class="clock-container mb-8">
          <div id="time" class="text-5xl font-light text-[#F0FFF0]" aria-live="polite"></div>
          <div id="date" class="text-sm text-gray-100 mt-2" aria-live="polite"></div>
        </div>

        <!-- Social -->
        <div class="flex justify-center space-x-4 text-white">
          <a href="https://github.com/570chan" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><i class="fab fa-github fa-lg"></i></a>
          <a href="https://www.facebook.com/profile.php?id=61581606718917" target="_blank" rel="noopener noreferrer" aria-label="Facebook"><i class="fab fa-facebook fa-lg"></i></a>
          <a href="https://linkedin.com/in/your-profile" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn"><i class="fab fa-linkedin fa-lg"></i></a>
        </div>

        <!-- Timer container (hidden by default) -->
        <div id="timer-container" class="timer-hidden mt-6" data-initial-minutes="30" aria-hidden="true">
          <p class="text-sm text-gray-200 mb-2 opacity-80">‚è≥ Countdown Timer ‚Äî 30 ph√∫t th∆∞ gi√£n</p>
          <div id="timer-display">30:00</div>
          <div class="timer-controls" role="group" aria-label="ƒêi·ªÅu khi·ªÉn h·∫πn gi·ªù">
            <button id="start-pause-btn" title="Start / Pause" aria-pressed="false">
              <i class="fa fa-play" aria-hidden="true"></i><span class="sr-only">Start / Pause</span>
            </button>
            <button id="reset-btn" title="Reset">
              <i class="fa fa-rotate-right" aria-hidden="true"></i><span class="sr-only">Reset</span>
            </button>
          </div>
        </div>

        <div id="arrow-left" class="hint-arrow" aria-hidden="true">‚Üê</div>
        <div id="arrow-right" class="hint-arrow" aria-hidden="true">‚Üí</div>
      </div>

      <!-- Links / Music toggle (restored as anchor with background image) -->
      <div class="space-y-4">
        <a href="#" class="block link-card glass-card p-4 rounded-lg fade-in-card" aria-label="C√¥ng t·∫Øc ph√°t nh·∫°c" role="button" aria-pressed="false">
          <div class="flex items-center">
            <div class="mr-4 flex items-center" aria-hidden="true"></div>
            <div>
              <h3 class="font-medium">Kirara Magic - By the Seaside (feat. Kitsui Akira)</h3>
              <p class="text-sm">on/off music</p>
            </div>
          </div>
          <ul class="mt-3 space-y-1 text-sm">
            <li>‚Ä¢ <b>air</b> _.570chan</li>
          </ul>
        </a>
      </div>
    </div>

    <!-- Audio player. Link provided by you -->
    <audio id="music-player" loop preload="auto" aria-hidden="true">
      <source src="assets/kira.ogg" type="audio/mpeg">
    </audio>

    <script src="https://unpkg.com/feather-icons"></script>
    <script>
  (function () {
    const $ = (s, ctx = document) => ctx.querySelector(s);

    // Clock
    function updateClock() {
      const now = new Date();
      const optionsTime = { timeZone: 'Asia/Ho_Chi_Minh', hour12: false, hour: '2-digit', minute: '2-digit' };
      const timeStr = now.toLocaleTimeString('en-US', optionsTime);
      const [hours, minutes] = timeStr.split(':');
      const optionsDate = { timeZone: 'Asia/Ho_Chi_Minh', weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      const dateStr = now.toLocaleDateString('en-US', optionsDate);
      $('#time').textContent = `${hours}:${minutes}`;
      $('#date').textContent = dateStr;
    }
    updateClock();
    setInterval(updateClock, 1000);

    try { feather.replace(); } catch(e){}

    function getInitialSeconds(timerContainer) {
      if (!timerContainer) return 30 * 60;
      const attr = timerContainer.getAttribute('data-initial-minutes');
      const n = Number(attr);
      if (!attr || Number.isNaN(n) || !isFinite(n)) return 30 * 60;
      return Math.max(1, Math.floor(n)) * 60;
    }

    /* Timer (unchanged) */
    (function () {
      const card = document.querySelector('.glass-card img.profile-pic')?.closest('.glass-card') || document.querySelector('.glass-card');
      if (!card) return;

      const timerContainer = document.getElementById('timer-container');
      const timerDisplay = document.getElementById('timer-display');
      const startPauseBtn = document.getElementById('start-pause-btn');
      const resetBtn = document.getElementById('reset-btn');
      const children = Array.from(card.children).filter(c => c !== timerContainer);

      const INITIAL = getInitialSeconds(timerContainer);
      let remaining = INITIAL, intervalId = null, running = false, showing = false;

      function fmt(sec){
        const m = String(Math.floor(sec/60)).padStart(2,'0');
        const s = String(Math.floor(sec%60)).padStart(2,'0');
        return `${m}:${s}`;
      }
      function render(){ timerDisplay.textContent = fmt(remaining); }

      function notifyEnd(){
        try { alert('‚è∞ H·∫øt gi·ªù r·ªìi! ƒê·∫øm ng∆∞·ª£c ƒë√£ k·∫øt th√∫c.'); } catch(e){}
      }

      function start(){
        if (running) return;
        running = true;
        startPauseBtn.innerHTML = '<i class="fa fa-pause" aria-hidden="true"></i>';
        startPauseBtn.setAttribute('aria-pressed','true');

        intervalId = setInterval(() => {
          if (remaining > 0) { remaining--; render(); }
          else {
            clearInterval(intervalId); intervalId = null; running = false;
            startPauseBtn.innerHTML = '<i class="fa fa-play" aria-hidden="true"></i>';
            startPauseBtn.setAttribute('aria-pressed','false');
            notifyEnd();
          }
        }, 1000);
      }

      function pause(){
        if (!running) return;
        running = false;
        clearInterval(intervalId); intervalId = null;
        startPauseBtn.innerHTML = '<i class="fa fa-play" aria-hidden="true"></i>';
        startPauseBtn.setAttribute('aria-pressed','false');
      }

      function reset(){
        pause();
        remaining = INITIAL;
        render();
      }

      function showTimer(){
        if (showing) return;
        children.forEach(c => (c.style.display = 'none'));
        timerContainer.classList.remove('timer-hidden');
        timerContainer.classList.add('timer-transition','timer-hide');
        setTimeout(() => timerContainer.classList.replace('timer-hide','timer-show'), 10);
        timerContainer.setAttribute('aria-hidden','false');
        showing = true; render();
      }

      function hideTimer(){
        if (!showing) return;
        timerContainer.classList.replace('timer-show','timer-hide');
        setTimeout(() => {
          timerContainer.classList.add('timer-hidden');
          children.forEach(c => (c.style.display = ''));
          timerContainer.setAttribute('aria-hidden','true');
        }, 500);
        showing = false;
      }

      function toggleTimerView(){ showing ? hideTimer() : showTimer(); }

      startPauseBtn.addEventListener('click', e => { e.stopPropagation(); running ? pause() : start(); });
      resetBtn.addEventListener('click', e => { e.stopPropagation(); reset(); });

      // swipe support
      let tsX = null, tsY = null;
      const TH = 40;
      function handleSwipe(dx, dy){ if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > TH) toggleTimerView(); }

      [card, timerContainer].forEach(el => {
        el.addEventListener('touchstart', e => { const t = e.touches[0]; tsX = t.clientX; tsY = t.clientY; }, { passive:true });
        el.addEventListener('touchend', e => {
          if (tsX === null) return;
          const t = e.changedTouches[0];
          handleSwipe(t.clientX - tsX, t.clientY - tsY);
          tsX = tsY = null;
        }, { passive:true });
      });

      let mDown = false, mStartX = 0;
      [card, timerContainer].forEach(el => {
        el.addEventListener('mousedown', e => { mDown = true; mStartX = e.clientX; });
      });
      window.addEventListener('mouseup', e => {
        if (!mDown) return; mDown = false;
        const dx = e.clientX - mStartX;
        if (Math.abs(dx) > TH) toggleTimerView();
      });

      card.addEventListener('dblclick', toggleTimerView);
      timerContainer.addEventListener('dblclick', toggleTimerView);

      window.addEventListener('beforeunload', () => { intervalId && clearInterval(intervalId); });

      render();

      window.__neChanneeTimer = { start, pause, reset, show: showTimer, hide: hideTimer, getRemaining: () => remaining, getInitial: () => INITIAL };
    })();

    /* Hint arrows */
    (function () {
      const left = document.getElementById('arrow-left'), right = document.getElementById('arrow-right');
      if (!left || !right) return;
      let count = 0, max = 4;
      const id = setInterval(() => {
        if (count >= max) { left.remove(); right.remove(); clearInterval(id); return; }
        count++;
        left.classList.add('show'); right.classList.add('show');
        setTimeout(() => { left.classList.remove('show'); right.classList.remove('show'); }, 2000);
      }, 4500);
    })();

    // Music toggle: b·∫≠t / t·∫Øt nh·∫°c khi click v√†o "C√¥ng t·∫Øc ph√°t nh·∫°c" (anchor restored)
    (function () {
      const link = document.querySelector('.link-card');
      const audio = document.getElementById('music-player');
      if (!link || !audio) return;

      // Configurable fade settings
      const TARGET_VOLUME = 0.85; // 0.0 - 1.0
      const FADE_DURATION = 800; // ms

      // Ensure accessible initial state
      link.setAttribute('role', 'button');
      link.setAttribute('aria-pressed', 'false');

      // initialize audio volume (in case it isn't set)
      if (typeof audio.volume === 'number') audio.volume = 0;

      // Fade controller
      let fade = { raf: null, startTime: 0, from: 0, to: 0, duration: 0, active: false };

      function cancelFade() {
        if (fade.raf) {
          cancelAnimationFrame(fade.raf);
          fade.raf = null;
          fade.active = false;
        }
      }

      function fadeTo(target, duration = FADE_DURATION, onComplete) {
        cancelFade();
        fade.from = audio.volume;
        fade.to = Math.max(0, Math.min(1, target));
        fade.duration = Math.max(0, duration);
        fade.startTime = performance.now();
        fade.active = true;

        function step(now) {
          const elapsed = now - fade.startTime;
          const t = fade.duration === 0 ? 1 : Math.min(1, elapsed / fade.duration);
          const v = fade.from + (fade.to - fade.from) * t;
          audio.volume = Math.max(0, Math.min(1, v));
          if (t < 1) {
            fade.raf = requestAnimationFrame(step);
          } else {
            fade.active = false;
            fade.raf = null;
            if (typeof onComplete === 'function') onComplete();
          }
        }
        fade.raf = requestAnimationFrame(step);
      }

      // Media Session metadata (best-effort)
      function updateMediaSessionMetadata(opts = {}) {
        if (!('mediaSession' in navigator)) return;
        try {
          const title = opts.title || 'Kirara Magic - By the Seaside';
          const artist = opts.artist || 'Kitsui Akira';
          const album = opts.album || 'Kirara Magic';
          const artwork = opts.artwork || [
            { src: 'https://s3.tebi.io/570chan.com.v2/0c90190a804cbf1f91c659131e58f325.jpg', sizes: '512x512', type: 'image/jpeg' }
          ];
          navigator.mediaSession.metadata = new MediaMetadata({ title, artist, album, artwork });
        } catch (e) {}
      }

      function registerMediaSessionActions() {
        if (!('mediaSession' in navigator)) return;
        try {
          navigator.mediaSession.setActionHandler('play', () => { audio.play().catch(()=>{}); });
          navigator.mediaSession.setActionHandler('pause', () => { audio.pause(); });
          navigator.mediaSession.setActionHandler('seekbackward', (details) => {
            const skip = details && details.seekOffset ? details.seekOffset : 10;
            audio.currentTime = Math.max(0, audio.currentTime - skip);
          });
          navigator.mediaSession.setActionHandler('seekforward', (details) => {
            const skip = details && details.seekOffset ? details.seekOffset : 10;
            audio.currentTime = Math.min(audio.duration || Infinity, audio.currentTime + skip);
          });
        } catch (e) {}
      }

      registerMediaSessionActions();

      // Async play with fade; handles Promise rejection (autoplay policy)
      async function playWithFade() {
        cancelFade();
        if (!audio.paused) {
          // already playing: just ensure volume fades up
          fadeTo(TARGET_VOLUME);
          link.setAttribute('aria-pressed', 'true');
          updateNowPlayingUI(true);
          return;
        }
        try { audio.volume = 0; } catch (e) {}
        try {
          await audio.play(); // may reject if browser blocks autoplay
          fadeTo(TARGET_VOLUME);
          link.setAttribute('aria-pressed', 'true');
          updateNowPlayingUI(true);
        } catch (err) {
          console.warn('Audio play failed:', err);
          try { alert('Tr√¨nh duy·ªát c√≥ th·ªÉ ch·∫∑n ph√°t t·ª± ƒë·ªông. H√£y b·∫•m l·∫°i ƒë·ªÉ cho ph√©p ph√°t nh·∫°c.'); } catch(e){}
        }
      }

      function pauseWithFade() {
        cancelFade();
        fadeTo(0, FADE_DURATION, () => {
          try { audio.pause(); } catch (e) {}
          link.setAttribute('aria-pressed', 'false');
          updateNowPlayingUI(false);
        });
      }

      function updateNowPlayingUI(isPlaying) {
        const h3 = link.querySelector('h3');
        if (h3) {
          if (isPlaying) h3.textContent = '[on] Kirara Magic - By the Seaside (feat. Kitsui Akira)';
          else h3.textContent = '[off] Kirara Magic - By the Seaside (feat. Kitsui Akira)';
        }
        updateMediaSessionMetadata({
          title: 'Kirara Magic - By the Seaside',
          artist: 'Kitsui Akira. Cover KiiChan',
          album: 'feat. Kitsui Akira',
          artwork: [
            { src: 'https://s3.tebi.io/ely.bucket.s0.io.biti/IMG_20251213_143357.jpg', sizes: '512x512', type: 'image/jpeg' }
          ]
        });
      }

      link.addEventListener('click', function (e) {
        // prevent anchor navigation, stop propagation to avoid other toggles
        e.preventDefault();
        e.stopPropagation();

        // If a fade is in progress, reverse appropriately
        if (fade.active) {
          if (fade.to === 0) {
            playWithFade();
          } else {
            pauseWithFade();
          }
          return;
        }

        if (audio.paused) playWithFade();
        else pauseWithFade();
      });

      // Keep UI in sync if playback changed externally
      audio.addEventListener('pause', () => {
        try { audio.volume = 0; } catch (e) {}
        link.setAttribute('aria-pressed', 'false');
        const h3 = link.querySelector('h3');
        if (h3) h3.textContent = '[off] Kirara Magic - By the Seaside (feat. Kitsui Akira)';
        if ('mediaSession' in navigator) {
          try { navigator.mediaSession.playbackState = 'paused'; } catch (e) {}
        }
      });
      audio.addEventListener('play', () => {
        link.setAttribute('aria-pressed', 'true');
        const h3 = link.querySelector('h3');
        if (h3) h3.textContent = '[on] Kirara Magic - By the Seaside (feat. Kitsui Akira)';
        updateNowPlayingUI(true);
        if ('mediaSession' in navigator) {
          try { navigator.mediaSession.playbackState = 'playing'; } catch (e) {}
        }
      });

      window.addEventListener('beforeunload', cancelFade);
      // set initial metadata
      updateMediaSessionMetadata({
        title: 'Kirara Magic - By the Seaside',
        artist: 'Kitsui Akira. Cover KiiChan',
        album: 'feat. Kitsui Akira',
        artwork: [{ src: 'https://s3.tebi.io/ely.bucket.s0.io.biti/IMG_20251213_143357.jpg', sizes: '512x512', type: 'image/jpeg' }]
      });
    })();

  })();
    </script>
  </body>
</html>
